{"version":3,"file":"app.min.js","sources":["../../app/app.js","../../app/components/videodetail/zencoder-service.js","../../app/components/videodetail/videodetail-controller.js","../../app/components/videodetail/videofield-directive.js","../../app/components/videodetail/channelselection-directive.js","../../app/components/videodetail/dropdownfilter-service.js","../../app/shared/videoplayer/videoplayer-directive.js","../../app/components/videolist/videolist-controller.js","../../app/components/login/login-controller.js","../../app/components/channeldetail/channeldetail-controller.js","../../app/components/channellist/channellist-controller.js","../../app/components/sponsordetail/sponsordetail-controller.js","../../app/components/sponsorlist/sponsorlist-controller.js","../../app/components/serieslist/serieslist-controller.js","../../app/components/seriesdetail/seriesdetail-controller.js","../../app/shared/nav-dropdown/nav-dropdown-directive.js","../../app/shared/alert/alert-directive.js","../../app/shared/alert/alert-service.js","../../app/shared/api/channel-service.js","../../app/shared/api/series-service.js","../../app/shared/api/season-service.js","../../app/shared/api/video-service.js","../../app/shared/api/sponsor-service.js","../../app/shared/api/tags-service.js","../../app/shared/auth/tokenauth-service.js","../../app/shared/pagination/dirPagination.js","../../app/shared/create-content/create-content.js","../../app/shared/datepicker/datepicker-directive.js","../../app/shared/datepicker/converttolocal-filter.js","../../app/shared/listservice/list-service.js","../../app/shared/dropdownselector/dropdownselector-directive.js","../../app/shared/bettycropper/betty-cropper.js","../../app/shared/bettycropper/bettyeditable.js","../../app/shared/bettycropper/imagecropmodal.js","../../app/shared/bettycropper/openimagecropmodal.js","../../app/shared/currentuser/currentuser-service.js","../../app/shared/listnavbar/listnavbar-directive.js","../../app/shared/detailsnavbar/detailsnavbar-directive.js","../../app/shared/datetimeselectionmodal/datetimeselectionmodal-directive.js","../../app/shared/tags-autocomplete/tags-autocomplete-directive.js","../../app/shared/articletools/articletools-directive.js"],"names":["angular","module","config","$locationProvider","$httpProvider","$routeProvider","$sceDelegateProvider","RestangularProvider","resourceUrlWhitelist","html5Mode","setBaseUrl","addResponseInterceptor","data","operation","results","meta","count","prev","next","when","templateUrl","controller","reloadOnSearch","otherwise","redirectTo","constant","UPLOAD_TO_S3_PROGRESS_MESSAGE","UPLOAD_TO_S3_UPLOAD_BEGINNING_MESSAGE","UPLOAD_TO_S3_UPLOAD_COMPLETE_MESSAGE","UPLOAD_TO_S3_UPLOAD_FAILED_MESSAGE","ENCODE_FAILED_MESSAGE","ENCODE_PROGRESS_MESSAGE","service","$http","$q","$interval","ZencoderConstants","uploadToS3","file","videoObject","s3Config","encoding_payload","s3deferred","defer","formData","FormData","append","key","AWSAccessKeyId","acl","success_action_status","policy","signature","xhr","XMLHttpRequest","open","upload_endpoint","upload","onprogress","e","notify","lengthComputable","replace","Math","round","loaded","total","onload","resolve","addEventListener","reject","send","promise","encode","encodeDeferred","doPOST","then","response","zencoderProgressEndpoint","json","progressInterval","url","method","ignoreAuthorizationHeader","state","cancel","_","isUndefined","progress","this","uploadToS3AndEncode","uploadToS3AndEncodeDeferred","successCallback","success","errorCallback","error","notifyCallback","SAVED_ALERT_MESSAGE","SOMETHING_WENT_WRONG_ALERT_MESSAGE","PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE","DELETE_SUCCESSFUL","$scope","$routeParams","VideoService","$location","AlertService","VideoDetailControllerConstants","DropdownFilterService","Restangular","displaySaveSuccessfulAlert","displaySomethingWentWrongAlert","video","getVideo","has","one","videoId","get","setVideo","console","log","restangularizeElement","isEmpty","input","tags","autocompleteFields","tagObjects","dropdownFields","pluck","channel","setChannel","series","setSeries","sponsor","published","save","videoDetailForm","$valid","id","season","path","delete","remove","$","tooltip","FILE_TOO_LARGE_ERROR_MESSAGE","MUST_UPLOAD_FILES_ERROR_MESSAGE","PLEASE_SELECT_A_FILE_ERROR_MESSAGE","UPLOAD_COMPLETE_SUCCESS_MESSAGE","directive","Zencoder","transclude","$timeout","VideoFieldConstants","uploadVideo","fileField","unbind","bind","event","target","files","validateVideoFile","addVideo","fetchNewVideoObject","message","info","click","validateVideoFileDeferred","size","type","indexOf","addVideoDeferred","doGET","encodingPayload","uploadToS3Arguments","checkIfSourcesHaveLoadedAndRetryIfTheyAreNot","sources","clear","link","channelFieldChanged","seriesFieldChanged","populateChannelList","ChannelService","SeriesService","SeasonService","filter","newChannel","updateFilter","populateSeriesList","newSeries","populateSeasonList","setSeason","newSeason","setChannelList","channelList","channelId","seriesId","getList","page_size","f","seriesList","seasonList","restrict","scope","element","currentVideo","find","player","videojs","controls","autoplay","width","height","on","pause","$on","dispose","$rootScope","ListService","updateList","list","totalItems","params","getParams","setService","setFilterAndUpdateList","newFilterValue","setFilter","changeToEditPage","setOrderAndUpdateList","newOrderValue","setOrder","clearSearchAndUpdateList","clearSearch","selectSearchBox","focus","pageChanged","newPageNumber","setPage","setSearchAndUpdateList","setSearch","q","new","authService","showSearchBar","showSaveButton","username","password","submitLogin","login","ChannelDetailControllerConstants","getChannel","partner","channelDetailForm","SponsorService","SponsorDetailControllerConstants","hideDatetimeSelectionModal","getSponsor","sponsorId","sponsorDetailForm","newSponsor","SeriesDetailControllerConstants","getSeries","seriesDetailForm","sections","href","title","active","alertStatus","TIME_TO_WAIT_BEFORE_CLEARING","AlertServiceConstants","clearAfterDisplayingMessageFlag","setAlertStatusElementsToFalse","alertDeferred","alertService","factory","$injector","httpRequestBuffer","localStorageService","request","headers","token","isBettyCropperRequest","Authorization","responseError","ignoreAuthModule","status","deferred","refreshToken","interceptors","push","_login","post","set","_refreshToken","retryAll","rejectAll","_retryHttpRequest","buffer","reason","each","moduleName","DEFAULT_ID","err","$compile","$parse","paginationService","terminal","multiElement","priority","compile","tElement","tAttrs","expression","dirPaginate","match","filterPattern","itemsPerPageFilterRemoved","collectionGetter","rawId","paginationId","registerInstance","attrs","repeatExpression","idDefinedInFilter","hasAttribute","$set","eq","length","attr","currentPageGetter","compiled","currentPage","defaultCurrentPage","setCurrentPageParser","setAsyncModeTrue","$watch","result","setCollectionLength","$watchCollection","collection","paginationTemplate","generatePagesArray","collectionLength","rowsPerPage","paginationRange","position","pages","totalPages","ceil","halfWay","ellipsesNeeded","i","pageNumber","calculatePageNumber","openingEllipsesNeeded","closingEllipsesNeeded","numberRegex","elem","getPath","maxSize","onPageChange","goToPage","num","isValidPageNumber","getCollectionLength","getItemsPerPage","pagination","current","updateRangeValues","generatePagination","page","parseInt","getCurrentPage","last","setCurrent","itemsPerPage","range","lower","upper","min","test","isRegistered","idMessage","directionLinks","isDefined","$parent","$eval","boundaryLinks","max","previous","previousPage","setCurrentPage","end","start","Array","isAsyncMode","setItemsPerPage","slice","lastRegisteredInstance","instances","instanceId","asyncMode","getLastInstanceId","val","currentPageParser","context","assign","parser","provider","templatePath","setPath","$get","setContentType","contentType","goToContentTypesCreationPage","DATETIME_PICKER_FORMAT","MOMENTJS_FORMAT","$filter","DatetimePickerConstants","date","require","template","ngModel","convertToLocal","value","required","datetimepicker","format","startDate","Date","step","$formatters","unshift","formatDateForBackend","moment","$parsers","utc","local","ValidQueryParamsForListPage","currentService","serviceName","search","setList","searchQuery","orderBy","order_by","pick","omit","isNumber","ngRequired","placeholderText","populateCurrentItemsList","currentItems","BettyCropperService","$interpolate","IMAGE_SERVER_URL","BC_API_KEY","BettyImage","uploadImageDeferred","fileInputId","fileInput","inputTemplate","imageData","X-Betty-Api-Key","Content-Type","undefined","X-CSRFToken","transformRequest","identity","transformResponse","parseJSON","image","detailPatch","name","credit","selections","updateSelection","ratio","detail","BettyImageFactory","DEFAULT_IMAGE_WIDTH","Selection","prototype","scaleToFit","scale","fitRatio","thisRatio","scaled","getStyles","selection","scaledSelection","background-image","background-size","floor","background-position","x0","y0","background-repeat","exp","idStr","toString","segmentedId","substr","base_url","x1","y1","source","SelectionFactory","scaleBy","scaledToFit","BettyCropper","openImageCropModal","addStyles","hideMetas","editable","caption","alt","bettyImage","edit","setStyles","imageStyling","parent","ratioWidth","split","ratioHeight","background-color","newImage","resize","removeImage","editImage","$modalInstance","ratios","selectedCrop","cropMode","finished","thumb_container_styles","scaleData","Jcrop","allowSelect","allowMove","allowResize","keySupport","jcrop_api","image_url","Object","keys","setThumbStyles","crop","selectCrop","setOptions","aspectRatio","setSelect","thumb_styles","padding-top","padding-bottom","padding-left","padding-right","jcrop_selection","tellSelect","newSelection","x","x2","y","y2","saveAndQuit","close","saveAndNext","nextRatioIndex","$modal","backdrop","userDefer","$userPromise","self","getItems","$retrieveData","$simplified","user","displayName","first_name","last_name","email","logoUrl","CurrentUser","currentUserName","items","labelAttr","fetchItemsThatMatchSearch","tagsAreBeingFetchedFromTheServer","updateCurrentItemsAndDisplayDropdown","currentItemsIds","item","contains","selectedElement","controlSelectedElementWithKeyboard","keyCode","lastIndexOfCurrentItems","addItem","isCurrentTagInCurrentItemsPredicate","matches","currentObjectFetchedFromCurrentItems","removeItem","itemToBeRemovedFromArray"],"mappings":"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","sourcesContent":["'use strict';\n\n// ****** App Config ****** \\\\\n\nangular.module('videoHub', [\n    'ngCookies',\n    'ngRoute',\n    'ngAnimate',\n    'ngMessages',\n    'restangular',\n    'highcharts-ng',\n    'BettyCropper',\n    'ui.bootstrap',\n    'LocalStorageModule'\n  ])\n  .config(function($locationProvider, $httpProvider, $routeProvider, $sceDelegateProvider, RestangularProvider) {\n    //TODO: Put this code into a more meaningful locaiton. Throwing all of this stuff into config is not proper\n    //Add some stuff to the whitelist to prevent XSS blocking stuff\n    $sceDelegateProvider.resourceUrlWhitelist(['self', 'http://assets.onionstatic.com/videoads/*', 'http://onionwebtech.s3.amazonaws.com/**', 'http://tv.theonion.com/**', 'http://v.theonion.com/**']);\n\n    $locationProvider.html5Mode(true);\n\n    //Set the base URL for the Restangular stuff\n    RestangularProvider.setBaseUrl('/api/v0/');\n\n    //We need a response interceptor for 'getList' becuase it contains additional metadata that is normally stripped out by restangular\n    RestangularProvider.addResponseInterceptor(function(data, operation) {\n      if (operation === 'getList') {\n        var results = data.results;\n        if (results) {\n          results.meta = {\n            count: data.count,\n            prev: data.prev,\n            next: data.next\n          };\n        }\n        return results;\n      }\n      return data;\n    });\n\n    $routeProvider\n      .when('/cms/', {\n        templateUrl: 'components/videolist/videolist.html',\n        controller: 'VideoListController',\n        reloadOnSearch: false\n      })\n      .when('/cms/series/', {\n        templateUrl: 'components/serieslist/serieslist.html',\n        controller: 'SeriesListController',\n        reloadOnSearch: false\n      })\n      .when('/cms/channels/', {\n        templateUrl: 'components/channellist/channellist.html',\n        controller: 'ChannelListController',\n        reloadOnSearch: false\n      })\n      .when('/cms/sponsors/', {\n        templateUrl: 'components/sponsorlist/sponsorlist.html',\n        controller: 'SponsorListController',\n        reloadOnSearch: false\n      })\n      .when('/cms/login/', {\n        templateUrl: 'components/login/login.html',\n        controller: 'LoginController'\n      })\n      .when('/cms/video/new/', {\n        templateUrl: 'components/videodetail/videodetail.html',\n        controller: 'VideoDetailController'\n      })\n      .when('/cms/video/:videoId/', {\n        templateUrl: 'components/videodetail/videodetail.html',\n        controller: 'VideoDetailController'\n      })\n      .when('/cms/channel/new/', {\n        templateUrl: 'components/channeldetail/channeldetail.html',\n        controller: 'ChannelDetailController'\n      })\n      .when('/cms/channel/:channelId/', {\n        templateUrl: 'components/channeldetail/channeldetail.html',\n        controller: 'ChannelDetailController'\n      })\n      .when('/cms/series/new/', {\n        templateUrl: 'components/seriesdetail/seriesdetail.html',\n        controller: 'SeriesDetailController'\n      })\n      .when('/cms/series/:seriesId/', {\n        templateUrl: 'components/seriesdetail/seriesdetail.html',\n        controller: 'SeriesDetailController'\n      })\n      .when('/cms/sponsors/new/', {\n        templateUrl: 'components/sponsordetail/sponsordetail.html',\n        controller: 'SponsorDetailController'\n      })\n      .when('/cms/sponsors/:sponsorId/', {\n        templateUrl: 'components/sponsordetail/sponsordetail.html',\n        controller: 'SponsorDetailController'\n      })\n      .otherwise({\n        redirectTo: '/cms/'\n      });\n  })\n  .constant('ValidQueryParamsForListPage', [\n    'q', 'page', 'f', 'page_size', 'order_by'\n  ]);\n","'use strict';\n\nangular.module('videoHub')\n  .constant('ZencoderConstants', {\n    'UPLOAD_TO_S3_PROGRESS_MESSAGE': 'Uploading X% complete',\n    'UPLOAD_TO_S3_UPLOAD_BEGINNING_MESSAGE': 'Uploading...',\n    'UPLOAD_TO_S3_UPLOAD_COMPLETE_MESSAGE': 'Upload Complete. Begin Encoding.',\n    'UPLOAD_TO_S3_UPLOAD_FAILED_MESSAGE': 'Upload Failed',\n    'ENCODE_FAILED_MESSAGE': 'Encoding has failed.',\n    'ENCODE_PROGRESS_MESSAGE': 'Encoding: X%'\n  })\n  .service('Zencoder', function Zencoder($http, $q, $interval, ZencoderConstants) {\n\n    //TODO: this config object is awful\n    this.uploadToS3AndEncode = function(config) {\n      var uploadToS3AndEncodeDeferred = $q.defer();\n      var file = config.file;\n      var videoObject = config.videoObject;\n      //TODO: MOve into own function\n      var successCallback = function(success) {\n        uploadToS3AndEncodeDeferred.resolve(success);\n      };\n      var errorCallback = function(error) {\n        uploadToS3AndEncodeDeferred.reject(error);\n      };\n      var notifyCallback = function(notify) {\n        uploadToS3AndEncodeDeferred.notify(notify);\n      };\n\n      uploadToS3(file, videoObject)\n        .then(encode, errorCallback, notifyCallback)\n        .then(successCallback, errorCallback, notifyCallback);\n\n      return uploadToS3AndEncodeDeferred.promise;\n    };\n\n    function uploadToS3(file, videoObject) {\n      var s3Config = videoObject.encoding_payload;\n      var s3deferred = $q.defer();\n      //TODO: setup form data function\n      var formData = new FormData();\n      formData.append('key', s3Config.key);\n      formData.append('AWSAccessKeyId', s3Config.AWSAccessKeyId);\n      formData.append('acl', s3Config.acl);\n      formData.append('success_action_status', s3Config.success_action_status);\n      formData.append('policy', s3Config.policy);\n      formData.append('signature', s3Config.signature);\n      formData.append('file', file);\n      //We use XMLHttpRequest here becuase angular's http methods don't support progress updates.\n      //TODO: move this into separate function\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', s3Config.upload_endpoint);\n\n      xhr.upload.onprogress = function(e) {\n        if (e.lengthComputable) {\n          s3deferred.notify(ZencoderConstants.UPLOAD_TO_S3_PROGRESS_MESSAGE.replace('X', Math.round(e.loaded / e.total * 100)));\n        } else {\n          s3deferred.notify(ZencoderConstants.UPLOAD_TO_S3_UPLOAD_BEGINNING_MESSAGE);\n        }\n      };\n\n      xhr.onload = function() {\n        s3deferred.notify(ZencoderConstants.UPLOAD_TO_S3_UPLOAD_COMPLETE_MESSAGE);\n        s3deferred.resolve(videoObject);\n      };\n\n      xhr.addEventListener('error', function() {\n        s3deferred.reject(ZencoderConstants.UPLOAD_TO_S3_UPLOAD_FAILED_MESSAGE);\n      });\n\n      xhr.send(formData);\n      return s3deferred.promise;\n\n    }\n\n    function encode(videoObject) {\n      var encodeDeferred = $q.defer();\n      videoObject.doPOST({}, 'encode')\n        .then(function(response) {\n          var zencoderProgressEndpoint = response.json;\n          //TODO: Remove horrible interval stuff, just obnoxous\n          var progressInterval = $interval(function() {\n            $http({\n              url: zencoderProgressEndpoint,\n              method: 'GET',\n              'ignoreAuthorizationHeader': true\n            }).then(function(response) {\n              if (response.data.state === 'finished') {\n                encodeDeferred.resolve(videoObject);\n                $interval.cancel(progressInterval);\n              } else if (response.data.state === 'failed') {\n                encodeDeferred.reject(ZencoderConstants.ENCODE_FAILED_MESSAGE);\n                $interval.cancel(progressInterval);\n              } else {\n                if (!_.isUndefined(response.data.progress)) {\n                  encodeDeferred.notify(ZencoderConstants.ENCODE_PROGRESS_MESSAGE.replace('X', Math.round(response.data.progress)));\n                }\n              }\n            });\n          }, 2000);\n        }, function(data) {\n          encodeDeferred.reject(data);\n        });\n      return encodeDeferred.promise;\n    }\n  });\n","'use strict';\nangular.module('videoHub')\n  //TODO: These constants are redundant between the detail pages. Should be merged together into one mega-constant.\n  //TODO: The videodetail folder is getting crowded. Maybe look into splitting some stuff into it's own files?\n  .constant('VideoDetailControllerConstants', {\n    SAVED_ALERT_MESSAGE: 'Saved',\n    SOMETHING_WENT_WRONG_ALERT_MESSAGE: 'Something went wrong with saving the Video. Please call your friendly sysadmin.',\n    PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE: 'Please fill in all required fields.',\n    DELETE_SUCCESSFUL: 'Delete successful'\n  })\n  .controller('VideoDetailController', function($scope, $routeParams, VideoService, $location, AlertService, VideoDetailControllerConstants, DropdownFilterService, Restangular) {\n    $scope.video = {};\n\n    $scope.getVideo = function() {\n      if (_.has($routeParams, 'videoId')) {\n        return VideoService.one($routeParams.videoId).get().then(\n          $scope.setVideo,\n          function(data) {\n            console.log(data);\n          }\n        );\n      } else {\n        $scope.video = {};\n        Restangular.restangularizeElement(null, $scope.video, 'videos');\n        $scope.setVideo($scope.video);\n      }\n    };\n\n    $scope.setVideo = function(data) {\n      if (_.isEmpty(data.input)) {\n        data.input = '';\n      }\n      $scope.video = data;\n      if (_.isUndefined($scope.video.tags)) {\n        $scope.video.tags = [];\n      }\n\n      $scope.autocompleteFields.tagObjects = $scope.video.tags;\n      $scope.dropdownFields = {};\n      $scope.video.tags = _.pluck($scope.video.tags, 'id');\n\n      if (!_.isUndefined(data.channel)) {\n        DropdownFilterService.setChannel(data.channel);\n      }\n      if (!_.isUndefined(data.series)) {\n        DropdownFilterService.setSeries(data.series);\n      }\n      if (!_.isUndefined(data.sponsor)) {\n        $scope.dropdownFields.sponsor = data.sponsor;\n      }\n\n      if (!_.isUndefined(data.published)) {\n        $scope.published = data.published;\n      }\n    };\n\n    $scope.save = function() {\n      if ($scope.videoDetailForm.$valid) {\n\n        //TODO: this _has(blah)... thing happens enough that it should be a function.\n        if (_.has(DropdownFilterService.data.channel, 'id')) {\n          $scope.video.channel = DropdownFilterService.data.channel.id;\n        } else {\n          $scope.video.channel = null;\n        }\n\n        if (_.has(DropdownFilterService.data.series, 'id')) {\n          $scope.video.series = DropdownFilterService.data.series.id;\n        } else {\n          $scope.video.series = null;\n        }\n\n        if (_.has(DropdownFilterService.data.season, 'id')) {\n          $scope.video.season = DropdownFilterService.data.season.id;\n        } else {\n          $scope.video.season = null;\n        }\n\n        if(_.isEmpty($scope.published)){\n          $scope.video.published = null;\n        } else {\n          $scope.video.published = $scope.published;\n        }\n\n        if (_.has($scope.dropdownFields.sponsor, 'id')) {\n          $scope.video.sponsor = $scope.dropdownFields.sponsor.id;\n        }\n        $scope.video.tags = _.pluck($scope.autocompleteFields.tagObjects, 'id');\n        $scope.video.save().then($scope.successCallback, displaySomethingWentWrongAlert);\n      } else {\n        AlertService.error(VideoDetailControllerConstants.PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE, true);\n      }\n    };\n\n    $scope.successCallback = function(video) {\n      displaySaveSuccessfulAlert().then(function() {\n        if (!_.has($routeParams, 'videoId')) {\n          $location.path('cms/video/' + video.id + '/');\n        }\n      });\n    };\n\n    function displaySaveSuccessfulAlert() {\n      return AlertService.success(VideoDetailControllerConstants.SAVED_ALERT_MESSAGE, true);\n    }\n\n    function displaySomethingWentWrongAlert() {\n      AlertService.error(VideoDetailControllerConstants.SOMETHING_WENT_WRONG_ALERT_MESSAGE, true);\n    }\n\n    $scope.delete = function() {\n      $scope.video.remove().then(function() {\n        AlertService.success(VideoDetailControllerConstants.DELETE_SUCCESSFUL, true).then(function() {\n          $location.path('cms/');\n        });\n      });\n    };\n\n    $('#videoMustBeSavedBeforeUpload').tooltip();\n    $scope.autocompleteFields = {};\n    $scope.getVideo();\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .constant('VideoFieldConstants', {\n    FILE_TOO_LARGE_ERROR_MESSAGE: 'Upload file cannot be larger than 1024MB.',\n    MUST_UPLOAD_FILES_ERROR_MESSAGE: 'You must upload a video file.',\n    PLEASE_SELECT_A_FILE_ERROR_MESSAGE: 'Please select a file.',\n    UPLOAD_COMPLETE_SUCCESS_MESSAGE: 'Upload Complete'\n  })\n  .directive('videoField', function(Zencoder, $q) {\n    return {\n      templateUrl: 'components/videodetail/videofield.html',\n      transclude: true,\n      controller: function($scope, AlertService, $timeout, VideoFieldConstants, VideoService) {\n\n        $scope.uploadVideo = function() {\n          var fileField = $('#' + $scope.video.id + '-file-field');\n          fileField.unbind('change');\n          fileField.bind('change', function(event) {\n            var file = event.target.files[0];\n            $scope.validateVideoFile(file)\n              .then($scope.addVideo)\n              .then(Zencoder.uploadToS3AndEncode)\n              .then(\n                function() {\n                  AlertService.success(VideoFieldConstants.UPLOAD_COMPLETE_SUCCESS_MESSAGE, true).then($scope.fetchNewVideoObject);\n                },\n                function(error) {\n                  AlertService.error(error, true);\n                },\n                function(message) {\n                  if (!_.isUndefined(message)) {\n                    AlertService.info(message, false);\n                  }\n                });\n          });\n          fileField.click();\n        };\n\n        $scope.validateVideoFile = function(file) {\n          var validateVideoFileDeferred = $q.defer();\n          if (file) {\n            if (file.size > (1024 * 1024 * 1024)) {\n              validateVideoFileDeferred.reject(VideoFieldConstants.FILE_TOO_LARGE_ERROR_MESSAGE);\n            } else if (file.type.indexOf('video/') !== 0) {\n              validateVideoFileDeferred.reject(VideoFieldConstants.MUST_UPLOAD_FILES_ERROR_MESSAGE);\n            } else {\n              validateVideoFileDeferred.resolve(file);\n            }\n          } else {\n            validateVideoFileDeferred.reject(VideoFieldConstants.PLEASE_SELECT_A_FILE_ERROR_MESSAGE);\n          }\n          return validateVideoFileDeferred.promise;\n        };\n\n        $scope.addVideo = function(file) {\n          var addVideoDeferred = $q.defer();\n\n          $scope.video.doGET('encoding_auth').then(function(encodingPayload) {\n            $scope.video.encoding_payload = encodingPayload;\n            var uploadToS3Arguments = {\n              'file': file,\n              'videoObject': $scope.video\n            };\n            addVideoDeferred.resolve(uploadToS3Arguments);\n          });\n          return addVideoDeferred.promise;\n        };\n\n        $scope.checkIfSourcesHaveLoadedAndRetryIfTheyAreNot = function(response) {\n          if (_.isEmpty(response.sources)) {\n            $timeout($scope.fetchNewVideoObject, 2000);\n          } else {\n            $scope.video = response;\n            AlertService.clear();\n          }\n        };\n\n        $scope.fetchNewVideoObject = function() {\n          // We reload the video after all of the fun is over, in order to update it with the new sources.\n          VideoService.one($scope.video.id).get()\n            .then($scope.checkIfSourcesHaveLoadedAndRetryIfTheyAreNot);\n        };\n      }\n    };\n  });\n","'use strict';\nangular.module('videoHub').directive('channelSelection', ['DropdownFilterService', function(DropdownFilterService) {\n  return {\n    templateUrl: 'components/videodetail/channelselection.html',\n    transclude: true,\n    link: function($scope) {\n      $scope.data = DropdownFilterService.data;\n      $scope.channelFieldChanged = function() {\n        DropdownFilterService.setChannel($scope.data.channel);\n      };\n      $scope.seriesFieldChanged = function() {\n        DropdownFilterService.seriesFieldChanged($scope.data.series);\n      };\n      DropdownFilterService.populateChannelList();\n    }\n  };\n}]);\n","'use strict';\nangular.module('videoHub')\n  .service('DropdownFilterService', function(ChannelService, SeriesService, SeasonService) {\n\n    //There are places you can have thistakes in this service, so instead of using this, I use DropdownFilterService\n    var DropdownFilterService = this;\n    DropdownFilterService.data = {};\n    DropdownFilterService.filter = {};\n\n    DropdownFilterService.setChannel = function(newChannel) {\n      if (newChannel) {\n        DropdownFilterService.data.channel = newChannel;\n        DropdownFilterService.updateFilter();\n        DropdownFilterService.setSeries(null);\n        DropdownFilterService.populateSeriesList();\n      } else {\n        DropdownFilterService.clear();\n      }\n    };\n\n    DropdownFilterService.setSeries = function(newSeries) {\n      if (newSeries) {\n        DropdownFilterService.data.series = newSeries;\n        DropdownFilterService.updateFilter();\n        DropdownFilterService.populateSeasonList();\n      } else {\n        DropdownFilterService.data.series = null;\n        DropdownFilterService.data.season = null;\n      }\n    };\n\n    DropdownFilterService.setSeason = function(newSeason) {\n      if (newSeason) {\n        DropdownFilterService.data.season = newSeason;\n        DropdownFilterService.season = newSeason;\n      } else {\n        DropdownFilterService.season = null;\n      }\n    };\n\n    DropdownFilterService.setChannelList = function(channelList) {\n      DropdownFilterService.data.channelList = channelList;\n    };\n\n    DropdownFilterService.clear = function() {\n      DropdownFilterService.data.channel = null;\n      DropdownFilterService.data.series = null;\n      DropdownFilterService.data.season = null;\n    };\n\n    DropdownFilterService.updateFilter = function() {\n      if (_.has(DropdownFilterService.data.channel, 'id')) {\n        DropdownFilterService.filter.channelId = DropdownFilterService.data.channel.id;\n      } else {\n        DropdownFilterService.filter.channelId = null;\n      }\n\n      if (_.has(DropdownFilterService.data.series, 'id')) {\n        DropdownFilterService.filter.seriesId = DropdownFilterService.data.series.id;\n      } else {\n        DropdownFilterService.filter.seriesId = null;\n      }\n    };\n\n    DropdownFilterService.populateChannelList = function() {\n      return ChannelService.getList({\n        'page_size': 100\n      }).then(DropdownFilterService.setChannelList);\n    };\n\n    DropdownFilterService.populateSeriesList = function() {\n      return SeriesService.getList({\n        'page_size': 100,\n        'f': 'channel:' + DropdownFilterService.filter.channelId\n      }).then(function(data) {\n        DropdownFilterService.data.seriesList = data;\n      });\n    };\n\n    DropdownFilterService.populateSeasonList = function() {\n      return SeasonService.getList({\n        'page_size': 100,\n        'f': 'series:' + DropdownFilterService.filter.seriesId\n      }).then(function(data) {\n        DropdownFilterService.data.seasonList = data;\n      });\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .directive('videoPlayer', [ function() {\n    return {\n      replace: false,\n      restrict: 'E',\n      transclude: true,\n      templateUrl: 'shared/videoplayer/videoplayer.html',\n      link: function(scope, element) {\n        var currentVideo = element.find('video')[0];\n        scope.player = videojs(currentVideo, {\n          'controls': true,\n          'autoplay': false,\n          'width': 'auto',\n          'height': 'auto'\n        });\n\n        element.find('.modal').on('hidden.bs.modal', function(){\n          scope.player.pause();\n        });\n\n        scope.$on('$destroy', function(){\n          scope.player.dispose();\n        });\n      }\n    };\n  }]);\n","'use strict';\nangular.module('videoHub')\n  .controller('VideoListController', function($scope, $location, $routeParams, $rootScope, ListService) {\n    ListService.setService('VideoService');\n\n    function updateList() {\n      ListService.updateList()\n        .then(function() {\n          $scope.list = ListService.data.list;\n          $scope.totalItems = ListService.data.totalItems;\n          $scope.params = ListService.getParams();\n        });\n    }\n    updateList();\n\n    $scope.setFilterAndUpdateList = function(newFilterValue) {\n      ListService.setFilter(newFilterValue);\n      updateList();\n    };\n\n    $scope.changeToEditPage = function(id) {\n      $location.path('cms/video/' + id + '/');\n    };\n\n    $scope.setOrderAndUpdateList = function(newOrderValue) {\n      ListService.setOrder(newOrderValue);\n      updateList();\n    };\n\n    $scope.clearSearchAndUpdateList = function() {\n      ListService.clearSearch();\n      updateList();\n    };\n\n    $scope.selectSearchBox = function(){\n      $('#searchBox').focus();\n    };\n\n    $scope.pageChanged = function(newPageNumber) {\n      ListService.setPage(newPageNumber);\n      updateList();\n    };\n\n    $scope.setSearchAndUpdateList = function() {\n      ListService.setSearch($scope.params.q);\n      updateList();\n    };\n\n    $scope.new = function() {\n      $location.path('cms/new/');\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n    .controller('LoginController', function($scope, authService, $location, $rootScope) {\n        $rootScope.showSearchBar = false;\n        $rootScope.showSaveButton = false;\n        $scope.username = '';\n        $scope.password = '';\n        $scope.submitLogin = function() {\n            authService.login($scope.username, $scope.password);\n        };\n    });\n","'use strict';\nangular.module('videoHub')\n  .constant('ChannelDetailControllerConstants', {\n    SAVED_ALERT_MESSAGE: 'Saved',\n    SOMETHING_WENT_WRONG_ALERT_MESSAGE: 'Something went wrong with saving the Channel. Please call your friendly sysadmin.',\n    PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE: 'Please fill in all required fields.',\n    DELETE_SUCCESSFUL: 'Delete successful'\n  })\n  .controller('ChannelDetailController', function($scope, $routeParams, ChannelService, $location, AlertService, ChannelDetailControllerConstants, Restangular) {\n    $scope.channel = {};\n\n    $scope.getChannel = function() {\n      if (_.has($routeParams, 'channelId')) {\n\n        return ChannelService.one($routeParams.channelId).get().then(\n          function(data) {\n            $scope.channel = data;\n            $scope.dropdownFields.partner = $scope.channel.partner;\n            if (!_.isUndefined(data.published)) {\n              $scope.published = data.published;\n            }\n          },\n          function(data) {\n            console.log(data);\n          }\n        );\n      } else {\n        $scope.channel = {};\n        Restangular.restangularizeElement(null, $scope.channel, 'channels');\n      }\n    };\n\n    $scope.save = function() {\n      if ($scope.channelDetailForm.$valid) {\n        if (_.has($scope.dropdownFields.partner, 'id')) {\n          $scope.channel.partner = $scope.dropdownFields.partner.id;\n        } else {\n          $scope.channel.partner = null;\n        }\n\n        if (_.isEmpty($scope.published)) {\n          $scope.channel.published = null;\n        } else {\n          $scope.channel.published = $scope.published;\n        }\n\n        $scope.channel.save().then($scope.successCallback, displaySomethingWentWrongAlert);\n      } else {\n        AlertService.error(ChannelDetailControllerConstants.PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE, true);\n      }\n    };\n\n    $scope.successCallback = function(channel) {\n      displaySaveSuccessfulAlert().then(function() {\n        if (!_.has($routeParams, 'channelId')) {\n          $location.path('cms/channel/' + channel.id + '/');\n        }\n      });\n    };\n\n    function displaySaveSuccessfulAlert() {\n      return AlertService.success(ChannelDetailControllerConstants.SAVED_ALERT_MESSAGE, true);\n    }\n\n    function displaySomethingWentWrongAlert() {\n      AlertService.error(ChannelDetailControllerConstants.SOMETHING_WENT_WRONG_ALERT_MESSAGE, true);\n    }\n\n    $scope.delete = function() {\n      AlertService.info('If you would like to delete a channel, please contact your friendly sysadmin.', true);\n    };\n\n    $scope.dropdownFields = {};\n    $scope.getChannel();\n  });\n","'use strict';\nangular.module('videoHub')\n  .controller('ChannelListController', function($scope, $location, $routeParams, $rootScope, ListService) {\n    ListService.setService('ChannelService');\n\n    function updateList() {\n      ListService.updateList()\n        .then(function() {\n          $scope.list = ListService.data.list;\n          $scope.totalItems = ListService.data.totalItems;\n          $scope.params = ListService.getParams();\n        });\n    }\n    updateList();\n\n    $scope.setFilterAndUpdateList = function(newFilterValue) {\n      ListService.setFilter(newFilterValue);\n      updateList();\n      //Only used to determine active state\n    };\n\n    $scope.changeToEditPage = function(id) {\n      $location.path('cms/channel/' + id + '/');\n    };\n\n    $scope.setOrderAndUpdateList = function(newOrderValue) {\n      ListService.setOrder(newOrderValue);\n      updateList();\n    };\n\n    $scope.clearSearchAndUpdateList = function() {\n      ListService.clearSearch();\n      updateList();\n    };\n\n    $scope.pageChanged = function(newPageNumber) {\n      ListService.setPage(newPageNumber);\n      updateList();\n    };\n\n    $scope.selectSearchBox = function(){\n      $('#searchBox').focus();\n    };\n\n    $scope.setSearchAndUpdateList = function() {\n      ListService.setSearch($scope.params.q);\n      updateList();\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .constant('SponsorDetailControllerConstants', {\n    SAVED_ALERT_MESSAGE: 'Saved',\n    SOMETHING_WENT_WRONG_ALERT_MESSAGE: 'Something went wrong with saving the Sponsor. Please call your friendly sysadmin.',\n    PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE: 'Please fill in all required fields.',\n    DELETE_SUCCESSFUL: 'Delete successful'\n  })\n  .controller('SponsorDetailController', function($scope, $routeParams, SponsorService, $location, AlertService, SponsorDetailControllerConstants, Restangular) {\n    $scope.sponsor = {};\n    $scope.hideDatetimeSelectionModal = true;\n\n    $scope.getSponsor = function() {\n      if (_.has($routeParams, 'sponsorId')) {\n        return SponsorService.one($routeParams.sponsorId).get().then(\n          function(data) {\n            $scope.sponsor = data;\n          },\n          function(data) {\n            console.log(data);\n          }\n        );\n      } else {\n        $scope.sponsor = {};\n        Restangular.restangularizeElement(null, $scope.sponsor, 'sponsors');\n      }\n    };\n\n    $scope.save = function() {\n      if ($scope.sponsorDetailForm.$valid) {\n        $scope.sponsor.save().then($scope.successCallback, displaySomethingWentWrongAlert);\n      } else {\n        AlertService.error(SponsorDetailControllerConstants.PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE, true);\n      }\n    };\n\n    $scope.successCallback = function(newSponsor) {\n      displaySaveSuccessfulAlert().then(function() {\n        if (!_.has($routeParams, 'sponsorId')) {\n          $location.path('cms/sponsors/' + newSponsor.id);\n        }\n      });\n    };\n\n    function displaySaveSuccessfulAlert() {\n      return AlertService.success(SponsorDetailControllerConstants.SAVED_ALERT_MESSAGE, true);\n    }\n\n    function displaySomethingWentWrongAlert() {\n      AlertService.error(SponsorDetailControllerConstants.SOMETHING_WENT_WRONG_ALERT_MESSAGE, true);\n    }\n\n    $scope.delete = function() {\n      AlertService.info('If you would like to delete a sponsor, please contact your friendly sysadmin.', true);\n    };\n    $scope.getSponsor();\n  });\n","'use strict';\nangular.module('videoHub')\n  .controller('SponsorListController', function($scope, $location, $routeParams, $rootScope, ListService) {\n    ListService.setService('SponsorService');\n\n    function updateList() {\n      ListService.updateList()\n        .then(function() {\n          $scope.list = ListService.data.list;\n          $scope.totalItems = ListService.data.totalItems;\n          $scope.params = ListService.getParams();\n        });\n    }\n    updateList();\n\n    $scope.setFilterAndUpdateList = function(newFilterValue) {\n      ListService.setFilter(newFilterValue);\n      updateList();\n      //Only used to determine active state\n    };\n\n    $scope.changeToEditPage = function(id) {\n      $location.path('cms/sponsors/' + id + '/');\n    };\n\n    $scope.setOrderAndUpdateList = function(newOrderValue) {\n      ListService.setOrder(newOrderValue);\n      updateList();\n    };\n\n    $scope.clearSearchAndUpdateList = function() {\n      ListService.clearSearch();\n      updateList();\n    };\n\n    $scope.selectSearchBox = function(){\n      $('#searchBox').focus();\n    };\n\n    $scope.pageChanged = function(newPageNumber) {\n      ListService.setPage(newPageNumber);\n      updateList();\n    };\n\n    $scope.setSearchAndUpdateList = function() {\n      ListService.setSearch($scope.params.q);\n      updateList();\n    };\n  });\n","'use strict';\nangular.module('videoHub')\n  .controller('SeriesListController', function($scope, $location, $routeParams, $rootScope, ListService) {\n    ListService.setService('SeriesService');\n\n    function updateList() {\n      ListService.updateList()\n        .then(function() {\n          $scope.list = ListService.data.list;\n          $scope.totalItems = ListService.data.totalItems;\n          $scope.params = ListService.getParams();\n        });\n    }\n    updateList();\n\n    $scope.setFilterAndUpdateList = function(newFilterValue) {\n      ListService.setFilter(newFilterValue);\n      updateList();\n    };\n\n    $scope.changeToEditPage = function(id) {\n      $location.path('cms/series/' + id + '/');\n    };\n\n    $scope.setOrderAndUpdateList = function(newOrderValue) {\n      ListService.setOrder(newOrderValue);\n      updateList();\n    };\n\n    $scope.clearSearchAndUpdateList = function() {\n      ListService.clearSearch();\n      updateList();\n    };\n\n    $scope.pageChanged = function(newPageNumber) {\n      ListService.setPage(newPageNumber);\n      updateList();\n    };\n\n    $scope.selectSearchBox = function(){\n      $('#searchBox').focus();\n    };\n\n    $scope.setSearchAndUpdateList = function() {\n      ListService.setSearch($scope.params.q);\n      updateList();\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .constant('SeriesDetailControllerConstants', {\n    SAVED_ALERT_MESSAGE: 'Saved',\n    SOMETHING_WENT_WRONG_ALERT_MESSAGE: 'Something went wrong with saving the Series. Please call your friendly sysadmin.',\n    PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE: 'Please fill in all required fields.',\n    DELETE_SUCCESSFUL: 'Delete successful'\n  })\n  .controller('SeriesDetailController', function($scope, $routeParams, SeriesService, $location, AlertService, SeriesDetailControllerConstants, Restangular) {\n    $scope.series = {};\n\n    $scope.getSeries = function() {\n      if (_.has($routeParams, 'seriesId')) {\n        return SeriesService.one($routeParams.seriesId).get().then(\n          function(data) {\n            $scope.series = data;\n            $scope.dropdownFields.channel = data.channel;\n            $scope.dropdownFields.sponsor = data.sponsor;\n            if (!_.isUndefined(data.published)) {\n              $scope.published = data.published;\n            }\n          },\n          function(data) {\n            console.log(data);\n          }\n        );\n      } else {\n        $scope.series = {};\n        Restangular.restangularizeElement(null, $scope.series, 'series');\n        $scope.dropdownFields.channel = {};\n        $scope.dropdownFields.sponsor = {};\n      }\n    };\n\n    $scope.save = function() {\n      if ($scope.seriesDetailForm.$valid) {\n        if (_.has($scope.dropdownFields.channel, 'id')) {\n          $scope.series.channel = $scope.dropdownFields.channel.id;\n        } else {\n          $scope.series.channel = null;\n        }\n\n        if (_.has($scope.dropdownFields.sponsor, 'id')) {\n          $scope.series.sponsor = $scope.dropdownFields.sponsor.id;\n        } else {\n          $scope.series.sponsor = null;\n        }\n\n        if (_.isEmpty($scope.published)) {\n          $scope.series.published = null;\n        } else {\n          $scope.series.published = $scope.published;\n        }\n        $scope.series.save().then($scope.successCallback, displaySomethingWentWrongAlert);\n      } else {\n        AlertService.error(SeriesDetailControllerConstants.PLEASE_FILL_IN_ALL_REQUIRED_FIELDS_ALERT_MESSAGE, true);\n      }\n    };\n\n    $scope.successCallback = function(series) {\n      displaySaveSuccessfulAlert().then(function() {\n        if (!_.has($routeParams, 'seriesId')) {\n          $location.path('cms/series/' + series.id);\n        }\n      });\n    };\n\n    function displaySaveSuccessfulAlert() {\n      return AlertService.success(SeriesDetailControllerConstants.SAVED_ALERT_MESSAGE, true);\n    }\n\n    function displaySomethingWentWrongAlert() {\n      AlertService.error(SeriesDetailControllerConstants.SOMETHING_WENT_WRONG_ALERT_MESSAGE, true);\n    }\n\n    $scope.delete = function() {\n      AlertService.info('If you would like to delete a series, please contact your friendly sysadmin.', true);\n    };\n\n    $scope.dropdownFields = {};\n    $scope.getSeries();\n  });\n","'use strict';\n\nangular.module('videoHub').directive('navDropdown', [\n  function() {\n    return {\n      controller: function ($scope) {\n        $scope.sections = [{\n          href: 'cms/',\n          title: 'Videos'\n        }, {\n          href: 'cms/series/',\n          title: 'Series'\n        }, {\n          href: 'cms/channels/',\n          title: 'Channels'\n        }, {\n          href: 'cms/sponsors/',\n          title: 'Sponsors'\n        }];\n      },\n      restrict: 'E',\n      scope: {\n        active: '@'\n      },\n      templateUrl: 'shared/nav-dropdown/nav-dropdown.html'\n    };\n  }]);\n","'use strict';\nangular.module('videoHub')\n  .directive('alertbar', function() {\n    return {\n      templateUrl: 'shared/alert/alert-directive.html',\n      restrict: 'E',\n      controller: function($scope, AlertService) {\n        $scope.alertStatus = AlertService.alertStatus;\n      }\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .constant('AlertServiceConstants', {\n    TIME_TO_WAIT_BEFORE_CLEARING: 2000\n  })\n  .service('AlertService', function($timeout, $q, AlertServiceConstants) {\n    this.alertStatus = {};\n    this.clear = function(clearAfterDisplayingMessageFlag) {\n      if (_.isUndefined(clearAfterDisplayingMessageFlag)){\n        this.setAlertStatusElementsToFalse();\n      }\n      var alertDeferred = $q.defer();\n      var alertService = this;\n      if (clearAfterDisplayingMessageFlag) {\n        $timeout(function() {\n          alertService.setAlertStatusElementsToFalse();\n          alertDeferred.resolve();\n        }, AlertServiceConstants.TIME_TO_WAIT_BEFORE_CLEARING);\n      } else {\n        alertDeferred.resolve();\n      }\n\n      return alertDeferred.promise;\n    };\n\n    this.setAlertStatusElementsToFalse = function(){\n      this.alertStatus.error = false;\n      this.alertStatus.info = false;\n      this.alertStatus.success = false;\n    };\n\n    this.success = function(message, clearAfterDisplayingMessageFlag) {\n      this.clear();\n      this.alertStatus.success = message;\n      return this.clear(clearAfterDisplayingMessageFlag);\n    };\n    this.error = function(message, clearAfterDisplayingMessageFlag) {\n      this.clear();\n      this.alertStatus.error = message;\n      return this.clear(clearAfterDisplayingMessageFlag);\n    };\n    this.info = function(message, clearAfterDisplayingMessageFlag) {\n      this.clear();\n      this.alertStatus.info = message;\n      return this.clear(clearAfterDisplayingMessageFlag);\n    };\n  });\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('ChannelService',\nfunction(Restangular) {\n  return Restangular.service('channels');\n});\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('SeriesService',\nfunction(Restangular) {\n  return Restangular.service('series');\n});\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('SeasonService',\nfunction(Restangular) {\n  return Restangular.service('seasons');\n});\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('VideoService',\nfunction(Restangular) {\n  return Restangular.service('videos');\n});\n","\n'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('SponsorService',\nfunction(Restangular) {\n  return Restangular.service('sponsors');\n});\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('videoHub')\n.factory('TagsService',\nfunction(Restangular) {\n  return Restangular.service('tags');\n});\n","'use strict';\nangular.module('videoHub')\n  .factory('authInterceptor', ['$rootScope', '$q', '$location', '$injector', 'httpRequestBuffer', 'localStorageService', function($rootScope, $q, $location, $injector, httpRequestBuffer, localStorageService) {\n    return {\n      'request': function(config) {\n        config.headers = config.headers || {};\n        var token = localStorageService.get('authToken');\n        var isBettyCropperRequest = _.has(config.headers, 'X-Betty-Api-Key');\n        if (token) {\n          if (!config.ignoreAuthorizationHeader && !isBettyCropperRequest) {\n            config.headers.Authorization = 'JWT ' + token;\n          }\n        }\n        return config;\n      },\n      'responseError': function(response) {\n        if (response.config) {\n          var ignoreAuthModule = response.config.ignoreAuthModule || response.config.headers.ignoreAuthModule;\n          if (!ignoreAuthModule) {\n            if (response.status === 403) {\n              var deferred = $q.defer();\n              httpRequestBuffer.append(response.config, deferred);\n              var authService = $injector.get('authService');\n              authService.refreshToken();\n            }\n          }\n        }\n        return $q.reject(response);\n      }\n    };\n  }])\n  .config(['$httpProvider', function($httpProvider) {\n    $httpProvider.interceptors.push('authInterceptor');\n  }])\n  .service('authService', ['$http', '$rootScope', '$location', 'httpRequestBuffer', 'localStorageService', 'AlertService', function($http, $rootScope, $location, httpRequestBuffer, localStorageService, AlertService) {\n    var _login = function(username, password) {\n      return $http.post('/api/token/auth', {\n          'username': username,\n          'password': password\n        })\n        .success(function(response) {\n          localStorageService.set('authToken', response.token);\n          $location.path('cms/');\n        })\n        .error(function() {\n          AlertService.error('Username or password provided is incorrect.', true);\n        });\n    };\n    var _refreshToken = function() {\n      //TODO: put into constant\n      var token = localStorageService.get('authToken');\n      return $http.post('/api/token/refresh', {\n          'token': token\n        }, {\n          'ignoreAuthModule': true\n        }).success(function(response) {\n          localStorageService.set('authToken', response.token);\n          httpRequestBuffer.retryAll();\n        })\n        .error(function() {\n          httpRequestBuffer.rejectAll();\n          AlertService.error('You failed to authenticate. Redirecting to login.', true);\n          //TODO: put into constant\n          $location.path('cms/login');\n        });\n    };\n\n    return {\n      login: _login,\n      refreshToken: _refreshToken\n    };\n  }])\n  // Thanks to witoldsz/angular-http-auth\n  .factory('httpRequestBuffer', ['$injector',\n    function($injector) {\n      var buffer = [];\n\n      var $http;\n\n      function _retryHttpRequest(config, deferred) {\n        function successCallback(response) {\n          deferred.resolve(response);\n        }\n\n        function errorCallback(response) {\n          deferred.reject(response);\n        }\n        $http = $http || $injector.get('$http');\n        config.headers.ignoreAuthModule = true;\n        $http(config).then(successCallback, errorCallback);\n      }\n\n      return {\n        append: function(config, deferred) {\n          buffer.push({\n            config: config,\n            deferred: deferred\n          });\n        },\n        rejectAll: function(reason) {\n          if (reason) {\n            _.each(buffer, function(request) {\n              request.deferred.reject(reason);\n            });\n          }\n          buffer = [];\n        },\n        retryAll: function() {\n          _.each(buffer, function(request) {\n            _retryHttpRequest(request.config, request.deferred);\n          });\n          buffer = [];\n        }\n      };\n    }\n  ]);\n","/**\n * dirPagination - AngularJS module for paginating (almost) anything.\n *\n *\n * Credits\n * =======\n *\n * Daniel Tabuenca: https://groups.google.com/d/msg/angular/an9QpzqIYiM/r8v-3W1X5vcJ\n * for the idea on how to dynamically invoke the ng-repeat directive.\n *\n * I borrowed a couple of lines and a few attribute names from the AngularUI Bootstrap project:\n * https://github.com/angular-ui/bootstrap/blob/master/src/pagination/pagination.js\n *\n * Copyright 2014 Michael Bromley <michael@michaelbromley.co.uk>\n */\n\n(function() {\n\n    /**\n     * Config\n     */\n    var moduleName = 'videoHub';\n    var DEFAULT_ID = '__default';\n\n    /**\n     * Module\n     */\n    var module;\n    try {\n        module = angular.module(moduleName);\n    } catch(err) {\n        // named module does not exist, so create one\n        module = angular.module(moduleName, []);\n    }\n\n    module.directive('dirPaginate', ['$compile', '$parse', '$timeout', 'paginationService', function($compile, $parse, $timeout, paginationService) {\n\n        return  {\n            terminal: true,\n            multiElement: true,\n            priority: 5000, // This setting is used in conjunction with the later call to $compile() to prevent infinite recursion of compilation\n            compile: function dirPaginationCompileFn(tElement, tAttrs){\n\n                var expression = tAttrs.dirPaginate;\n                // regex taken directly from https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js#L211\n                var match = expression.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\n\n                var filterPattern = /\\|\\s*itemsPerPage\\s*:[^|]*/;\n                if (match[2].match(filterPattern) === null) {\n                    throw 'pagination directive: the \\'itemsPerPage\\' filter must be set.';\n                }\n                var itemsPerPageFilterRemoved = match[2].replace(filterPattern, '');\n                var collectionGetter = $parse(itemsPerPageFilterRemoved);\n\n                // If any value is specified for paginationId, we register the un-evaluated expression at this stage for the benefit of any\n                // dir-pagination-controls directives that may be looking for this ID.\n                var rawId = tAttrs.paginationId || DEFAULT_ID;\n                paginationService.registerInstance(rawId);\n\n                return function dirPaginationLinkFn(scope, element, attrs){\n\n                    // Now that we have access to the `scope` we can interpolate any expression given in the paginationId attribute and\n                    // potentially register a new ID if it evaluates to a different value than the rawId.\n                    var paginationId = $parse(attrs.paginationId)(scope) || attrs.paginationId || DEFAULT_ID;\n                    paginationService.registerInstance(paginationId);\n\n                    var repeatExpression;\n                    var idDefinedInFilter = !!expression.match(/(\\|\\s*itemsPerPage\\s*:[^|]*:[^|]*)/);\n                    if (paginationId !== DEFAULT_ID && !idDefinedInFilter) {\n                        repeatExpression = expression.replace(/(\\|\\s*itemsPerPage\\s*:[^|]*)/, \"$1 : '\" + paginationId + \"'\");\n                    } else {\n                        repeatExpression = expression;\n                    }\n\n                    // Add ng-repeat to the dom element\n                    if (element[0].hasAttribute('dir-paginate-start') || element[0].hasAttribute('data-dir-paginate-start')) {\n                        // using multiElement mode (dir-paginate-start, dir-paginate-end)\n                        attrs.$set('ngRepeatStart', repeatExpression);\n                        element.eq(element.length - 1).attr('ng-repeat-end', true);\n                    } else {\n                        attrs.$set('ngRepeat', repeatExpression);\n                    }\n\n                    var compiled =  $compile(element, false, 5000); // we manually compile the element again, as we have now added ng-repeat. Priority less than 5000 prevents infinite recursion of compiling dirPaginate\n\n                    var currentPageGetter;\n                    if (attrs.currentPage) {\n                        currentPageGetter = $parse(attrs.currentPage);\n                    } else {\n                        // if the current-page attribute was not set, we'll make our own\n                        var defaultCurrentPage = paginationId + '__currentPage';\n                        scope[defaultCurrentPage] = 1;\n                        currentPageGetter = $parse(defaultCurrentPage);\n                    }\n                    paginationService.setCurrentPageParser(paginationId, currentPageGetter, scope);\n\n                    if (typeof attrs.totalItems !== 'undefined') {\n                        paginationService.setAsyncModeTrue(paginationId);\n                        scope.$watch(function() {\n                            return $parse(attrs.totalItems)(scope);\n                        }, function (result) {\n                            if (0 <= result) {\n                                paginationService.setCollectionLength(paginationId, result);\n                            }\n                        });\n                    } else {\n                        scope.$watchCollection(function() {\n                            return collectionGetter(scope);\n                        }, function(collection) {\n                            if (collection) {\n                                paginationService.setCollectionLength(paginationId, collection.length);\n                            }\n                        });\n                    }\n\n                    // Delegate to the link function returned by the new compilation of the ng-repeat\n                    compiled(scope);\n                };\n            }\n        };\n    }]);\n\n    module.directive('dirPaginationControls', ['paginationService', 'paginationTemplate', function(paginationService, paginationTemplate) {\n\n        var numberRegex = /^\\d+$/;\n\n        /**\n         * Generate an array of page numbers (or the '...' string) which is used in an ng-repeat to generate the\n         * links used in pagination\n         *\n         * @param currentPage\n         * @param rowsPerPage\n         * @param paginationRange\n         * @param collectionLength\n         * @returns {Array}\n         */\n        function generatePagesArray(currentPage, collectionLength, rowsPerPage, paginationRange) {\n            var pages = [];\n            var totalPages = Math.ceil(collectionLength / rowsPerPage);\n            var halfWay = Math.ceil(paginationRange / 2);\n            var position;\n\n            if (currentPage <= halfWay) {\n                position = 'start';\n            } else if (totalPages - halfWay < currentPage) {\n                position = 'end';\n            } else {\n                position = 'middle';\n            }\n\n            var ellipsesNeeded = paginationRange < totalPages;\n            var i = 1;\n            while (i <= totalPages && i <= paginationRange) {\n                var pageNumber = calculatePageNumber(i, currentPage, paginationRange, totalPages);\n\n                var openingEllipsesNeeded = (i === 2 && (position === 'middle' || position === 'end'));\n                var closingEllipsesNeeded = (i === paginationRange - 1 && (position === 'middle' || position === 'start'));\n                if (ellipsesNeeded && (openingEllipsesNeeded || closingEllipsesNeeded)) {\n                    pages.push('...');\n                } else {\n                    pages.push(pageNumber);\n                }\n                i ++;\n            }\n            return pages;\n        }\n\n        /**\n         * Given the position in the sequence of pagination links [i], figure out what page number corresponds to that position.\n         *\n         * @param i\n         * @param currentPage\n         * @param paginationRange\n         * @param totalPages\n         * @returns {*}\n         */\n        function calculatePageNumber(i, currentPage, paginationRange, totalPages) {\n            var halfWay = Math.ceil(paginationRange/2);\n            if (i === paginationRange) {\n                return totalPages;\n            } else if (i === 1) {\n                return i;\n            } else if (paginationRange < totalPages) {\n                if (totalPages - halfWay < currentPage) {\n                    return totalPages - paginationRange + i;\n                } else if (halfWay < currentPage) {\n                    return currentPage - halfWay + i;\n                } else {\n                    return i;\n                }\n            } else {\n                return i;\n            }\n        }\n\n        return {\n            restrict: 'AE',\n            templateUrl: function(elem, attrs) {\n                return attrs.templateUrl || paginationTemplate.getPath();\n            },\n            scope: {\n                maxSize: '=?',\n                onPageChange: '&?',\n                paginationId: '=?'\n            },\n            link: function dirPaginationControlsLinkFn(scope, element, attrs) {\n\n                // rawId is the un-interpolated value of the pagination-id attribute. This is only important when the corresponding dir-paginate directive has\n                // not yet been linked (e.g. if it is inside an ng-if block), and in that case it prevents this controls directive from assuming that there is\n                // no corresponding dir-paginate directive and wrongly throwing an exception.\n                var rawId = attrs.paginationId ||  DEFAULT_ID;\n                var paginationId = scope.paginationId || attrs.paginationId ||  DEFAULT_ID;\n\n                if (!paginationService.isRegistered(paginationId) && !paginationService.isRegistered(rawId)) {\n                    var idMessage = (paginationId !== DEFAULT_ID) ? ' (id: ' + paginationId + ') ' : ' ';\n                    throw 'pagination directive: the pagination controls' + idMessage + 'cannot be used without the corresponding pagination directive.';\n                }\n\n                if (!scope.maxSize) { scope.maxSize = 9; }\n                scope.directionLinks = angular.isDefined(attrs.directionLinks) ? scope.$parent.$eval(attrs.directionLinks) : true;\n                scope.boundaryLinks = angular.isDefined(attrs.boundaryLinks) ? scope.$parent.$eval(attrs.boundaryLinks) : false;\n\n                var paginationRange = Math.max(scope.maxSize, 5);\n                scope.pages = [];\n                scope.pagination = {\n                    last: 1,\n                    current: 1\n                };\n                scope.range = {\n                    lower: 1,\n                    upper: 1,\n                    total: 1\n                };\n\n                scope.$watch(function() {\n                    return (paginationService.getCollectionLength(paginationId) + 1) * paginationService.getItemsPerPage(paginationId);\n                }, function(length) {\n                    if (0 < length) {\n                        generatePagination();\n                    }\n                });\n\n                scope.$watch(function() {\n                    return (paginationService.getItemsPerPage(paginationId));\n                }, function(current, previous) {\n                    if (current != previous) {\n                        goToPage(scope.pagination.current);\n                    }\n                });\n\n                scope.$watch(function() {\n                    return paginationService.getCurrentPage(paginationId);\n                }, function(currentPage, previousPage) {\n                    if (currentPage != previousPage) {\n                        goToPage(currentPage);\n                    }\n                });\n\n                scope.setCurrent = function(num) {\n                    if (isValidPageNumber(num)) {\n                        paginationService.setCurrentPage(paginationId, num);\n                    }\n                };\n\n                function goToPage(num) {\n                    if (isValidPageNumber(num)) {\n                        scope.pages = generatePagesArray(num, paginationService.getCollectionLength(paginationId), paginationService.getItemsPerPage(paginationId), paginationRange);\n                        scope.pagination.current = num;\n                        updateRangeValues();\n\n                        // if a callback has been set, then call it with the page number as an argument\n                        if (scope.onPageChange) {\n                            scope.onPageChange({ newPageNumber : num });\n                        }\n                    }\n                }\n\n                function generatePagination() {\n                    var page = parseInt(paginationService.getCurrentPage(paginationId)) || 1;\n\n                    scope.pages = generatePagesArray(page, paginationService.getCollectionLength(paginationId), paginationService.getItemsPerPage(paginationId), paginationRange);\n                    scope.pagination.current = page;\n                    scope.pagination.last = scope.pages[scope.pages.length - 1];\n                    if (scope.pagination.last < scope.pagination.current) {\n                        scope.setCurrent(scope.pagination.last);\n                    } else {\n                        updateRangeValues();\n                    }\n                }\n\n                /**\n                 * This function updates the values (lower, upper, total) of the `scope.range` object, which can be used in the pagination\n                 * template to display the current page range, e.g. \"showing 21 - 40 of 144 results\";\n                 */\n                function updateRangeValues() {\n                    var currentPage = paginationService.getCurrentPage(paginationId),\n                        itemsPerPage = paginationService.getItemsPerPage(paginationId),\n                        totalItems = paginationService.getCollectionLength(paginationId);\n\n                    scope.range.lower = (currentPage - 1) * itemsPerPage + 1;\n                    scope.range.upper = Math.min(currentPage * itemsPerPage, totalItems);\n                    scope.range.total = totalItems;\n                }\n\n                function isValidPageNumber(num) {\n                    return (numberRegex.test(num) && (0 < num && num <= scope.pagination.last));\n                }\n            }\n        };\n    }]);\n\n    module.filter('itemsPerPage', ['paginationService', function(paginationService) {\n\n        return function(collection, itemsPerPage, paginationId) {\n            if (typeof (paginationId) === 'undefined') {\n                paginationId = DEFAULT_ID;\n            }\n            if (!paginationService.isRegistered(paginationId)) {\n                throw 'pagination directive: the itemsPerPage id argument (id: ' + paginationId + ') does not match a registered pagination-id.';\n            }\n            var end;\n            var start;\n            if (collection instanceof Array) {\n                itemsPerPage = parseInt(itemsPerPage) || 9999999999;\n                if (paginationService.isAsyncMode(paginationId)) {\n                    start = 0;\n                } else {\n                    start = (paginationService.getCurrentPage(paginationId) - 1) * itemsPerPage;\n                }\n                end = start + itemsPerPage;\n                paginationService.setItemsPerPage(paginationId, itemsPerPage);\n\n                return collection.slice(start, end);\n            } else {\n                return collection;\n            }\n        };\n    }]);\n\n    module.service('paginationService', function() {\n\n        var instances = {};\n        var lastRegisteredInstance;\n\n        this.registerInstance = function(instanceId) {\n            if (typeof instances[instanceId] === 'undefined') {\n                instances[instanceId] = {\n                    asyncMode: false\n                };\n                lastRegisteredInstance = instanceId;\n            }\n        };\n\n        this.isRegistered = function(instanceId) {\n            return (typeof instances[instanceId] !== 'undefined');\n        };\n\n        this.getLastInstanceId = function() {\n            return lastRegisteredInstance;\n        };\n\n        this.setCurrentPageParser = function(instanceId, val, scope) {\n            instances[instanceId].currentPageParser = val;\n            instances[instanceId].context = scope;\n        };\n        this.setCurrentPage = function(instanceId, val) {\n            instances[instanceId].currentPageParser.assign(instances[instanceId].context, val);\n        };\n        this.getCurrentPage = function(instanceId) {\n            var parser = instances[instanceId].currentPageParser;\n            return parser ? parser(instances[instanceId].context) : 1;\n        };\n\n        this.setItemsPerPage = function(instanceId, val) {\n            instances[instanceId].itemsPerPage = val;\n        };\n        this.getItemsPerPage = function(instanceId) {\n            return instances[instanceId].itemsPerPage;\n        };\n\n        this.setCollectionLength = function(instanceId, val) {\n            instances[instanceId].collectionLength = val;\n        };\n        this.getCollectionLength = function(instanceId) {\n            return instances[instanceId].collectionLength;\n        };\n\n        this.setAsyncModeTrue = function(instanceId) {\n            instances[instanceId].asyncMode = true;\n        };\n\n        this.isAsyncMode = function(instanceId) {\n            return instances[instanceId].asyncMode;\n        };\n    });\n\n    module.provider('paginationTemplate', function() {\n\n        var templatePath = 'shared/pagination/dirPagination.tpl.html';\n\n        this.setPath = function(path) {\n            templatePath = path;\n        };\n\n        this.$get = function() {\n            return {\n                getPath: function() {\n                    return templatePath;\n                }\n            };\n        };\n    });\n})();\n","'use strict';\n\nangular.module('videoHub')\n  .directive('createContent', function () {\n    return {\n      restrict: 'E',\n      templateUrl:  'shared/create-content/create-content.html',\n      controller: function($scope, $location){\n        $scope.setContentType = function(contentType){\n          $scope.contentType = contentType;\n        };\n\n        $scope.goToContentTypesCreationPage = function(){\n          $location.path('cms/' + $scope.contentType + '/new/');\n        };\n      }\n    };\n  });\n","'use strict';\nangular.module('videoHub')\n  .constant('DatetimePickerConstants', {\n    'DATETIME_PICKER_FORMAT': 'Y-m-d h:i A',\n    'MOMENTJS_FORMAT': 'YYYY-MM-DDTHH:mm:DDZZ'\n  })\n  .directive('datetimepicker', ['$filter', 'DatetimePickerConstants', function($filter, DatetimePickerConstants) {\n    return {\n      scope: {\n        'date': '='\n      },\n      replace: true,\n      require:'ngModel',\n      template: '<input name=\"datepicker\" class=\"form-control\" ng-model=\"date\" type=\"text\"/>',\n      link: function(scope, element, attrs, ngModel){\n        scope.required = attrs.required || false;\n        element.datetimepicker({\n          format: DatetimePickerConstants.DATETIME_PICKER_FORMAT,\n          startDate: new Date(),\n          step: 15\n          });\n\n        function convertToLocal(value){\n          return $filter('convertToLocal')(value);\n        }\n\n        ngModel.$formatters.unshift(convertToLocal);\n\n        scope.formatDateForBackend = function(value){\n          if (value){\n            return moment(value, DatetimePickerConstants.DATETIME_PICKER_FORMAT).format(DatetimePickerConstants.MOMENTJS_FORMAT);\n          } else {\n            return '';\n          }\n        };\n\n        ngModel.$parsers.unshift(scope.formatDateForBackend);\n      }\n    };\n  }]);\n","'use strict';\n\nangular.module('videoHub')\n\t.filter('convertToLocal', function() {\n    return function (input) {\n      if (input) {\n        return moment.utc(input).local().format('YYYY-MM-DD hh:mm A');\n      }\n      return input;\n    };\n  });\n","'use strict';\nangular.module('videoHub')\n  .service('ListService', function($rootScope, $location, $injector, ValidQueryParamsForListPage) {\n\n    this.data = {};\n    var ListService = this;\n    this.service = null;\n    var currentService = null;\n\n    this.getParams = function() {\n      return this.data.params;\n    };\n\n    this.setService = function(serviceName) {\n      this.service = $injector.get(serviceName);\n      currentService = this.service;\n      this.data.params = $location.search();\n      this.data.list = [];\n      this.data.totalItems = 0;\n    };\n\n    this.clearSearch = function() {\n      this.data.params.q = '';\n    };\n\n    this.setFilter = function(newFilterValue) {\n      this.data.params.f = newFilterValue;\n    };\n\n    this.setList = function(list) {\n      ListService.data.list = list;\n      if (list.meta) {\n        ListService.data.totalItems = list.meta.count;\n      } else {\n        list.meta = {};\n        list.meta.count = 0;\n      }\n    };\n\n    this.setSearch = function(searchQuery) {\n      this.data.params.q = searchQuery;\n    };\n\n    this.setOrder = function(newOrderValue) {\n      var orderBy = this.data.params.order_by;\n      if (orderBy) {\n        //If the existing orderBy value matches the new one, invert it.\n        if (orderBy.indexOf(newOrderValue) > -1 && orderBy.indexOf('-') === -1) {\n          orderBy = '-' + newOrderValue;\n        } else {\n          //If the existing orderBy value is already inverted, remove it.\n          if (orderBy.indexOf(newOrderValue) > -1) {\n            orderBy = null;\n          }\n        }\n      } else {\n        orderBy = newOrderValue;\n      }\n\n      this.data.params.order_by = orderBy;\n    };\n\n    this.setPage = function(pageNumber) {\n      this.data.params.page = pageNumber;\n    };\n\n    this.updateList = function() {\n      this.data.params = _.pick(this.data.params, ValidQueryParamsForListPage);\n      this.data.params = _.omit(this.data.params, function(value) {\n        return _.isEmpty(value) && !_.isNumber(value);\n      });\n      $location.search(this.data.params);\n      return currentService.getList(this.data.params).then(ListService.setList);\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .directive('dropdownSelector', ['$injector', function($injector) {\n    return {\n      templateUrl: 'shared/dropdownselector/dropdownselector.html',\n      replace: true,\n      scope: {\n        'ngModel': '=',\n        'ngRequired': '@',\n        'service': '@service',\n        'placeholderText': '@',\n      },\n      controller: function($scope) {\n        var service = $injector.get($scope.service);\n        $scope.populateCurrentItemsList = function() {\n          service.getList({\n            'page_size': 100\n          }).then(function(results) {\n            $scope.currentItems = results;\n          });\n        };\n\n        $scope.populateCurrentItemsList();\n      }\n    };\n  }]);\n","'use strict';\n(function () {\n  angular.module('BettyCropper', ['restangular'])\n    .value('DEFAULT_IMAGE_WIDTH', 1200)\n    .factory('Selection', SelectionFactory)\n    .factory('BettyImage', BettyImageFactory)\n    .service('BettyCropper', BettyCropperService);\n\n  function BettyCropperService($http, $interpolate, $q, IMAGE_SERVER_URL, BC_API_KEY, BettyImage) {\n      var fileInputId = '#bulbs-cms-hidden-image-file-input';\n      var inputTemplate = '<input id=\"bulbs-cms-hidden-image-file-input\" type=\"file\" accept=\"image/*\" style=\"position: absolute; left:-99999px;\" name=\"image\" />';\n\n      this.upload = upload;\n      this.get = get;\n      this.detail = get;\n      this.detailPatch = detailPatch;\n      this.updateSelection = updateSelection;\n\n      function upload() {\n        var uploadImageDeferred = $q.defer();\n\n        angular.element(fileInputId).remove();\n        var fileInput = angular.element(inputTemplate);\n        angular.element('body').append(fileInput);\n\n        fileInput.click();\n\n        fileInput.unbind('change');\n        fileInput.bind('change', function (e) {\n          if (e.target.files.length !== 1) {\n            uploadImageDeferred.reject('We need exactly one image!');\n          }\n          var file = e.target.files[0];\n          if (file.type.indexOf('image/') !== 0) {\n            uploadImageDeferred.reject('Not an image!');\n          }\n\n          if (file.size > 10 * 1024 * 1024) { // MAGIC!\n            uploadImageDeferred.reject('The file is too large!');\n          }\n\n          var imageData = new FormData();\n          imageData.append('image', file);\n\n          $http({\n            method: 'POST',\n            url: IMAGE_SERVER_URL + '/api/new',\n            headers: {\n              'X-Betty-Api-Key': BC_API_KEY,\n              'Content-Type': undefined,\n              'X-CSRFToken': undefined\n            },\n            data: imageData,\n            transformRequest: angular.identity,\n            transformResponse: function (data, headersGetter) {\n              // So, sometimes the browser doesn't think that JSON data is JSON.\n              if (typeof data === 'string') {\n                data = $.parseJSON(data);\n              }\n              var image = new BettyImage(data);\n              return image;\n            }\n          }).success(function (success) {\n            uploadImageDeferred.resolve(success);\n          }).error(function (error) {\n            uploadImageDeferred.reject(error);\n          });\n\n        });\n\n        return uploadImageDeferred.promise;\n      }\n\n      function get(id) {\n        return $http({\n          method: 'GET',\n          url: IMAGE_SERVER_URL + '/api/' + id,\n          headers: {\n            'X-Betty-Api-Key': BC_API_KEY,\n            'Content-Type': undefined,\n            'X-CSRFToken': undefined\n          },\n          transformRequest: angular.identity,\n          transformResponse: function (data, headersGetter) {\n            if (typeof data === 'string') {\n              data = $.parseJSON(data);\n            }\n            return new BettyImage(data);\n          }\n        });\n      }\n\n      function detailPatch(id, name, credit, selections) {\n        return $http({\n          method: 'PATCH',\n          url: IMAGE_SERVER_URL + '/api/' + id,\n          headers: {\n            'X-Betty-Api-Key': BC_API_KEY,\n            'Content-Type': undefined,\n            'X-CSRFToken': undefined\n          },\n          data: {\n            name: name,\n            credit: credit,\n            selections: selections\n          },\n          transformRequest: angular.identity,\n          transformResponse: function (data, headersGetter) {\n            if (typeof data === 'string') {\n              data = $.parseJSON(data);\n            }\n            return new BettyImage(data);\n          }\n        });\n      }\n\n      function updateSelection(id, ratio, selections) {\n        return $http({\n          method: 'POST',\n          url: IMAGE_SERVER_URL + '/api/' + id + '/' + ratio,\n          headers: {\n            'X-Betty-Api-Key': BC_API_KEY,\n            'Content-Type': undefined,\n            'X-CSRFToken': undefined\n          },\n          data: selections\n        });\n      }\n  }\n\n  function BettyImageFactory($interpolate, $http, IMAGE_SERVER_URL, BC_API_KEY, DEFAULT_IMAGE_WIDTH, Selection) {\n    function BettyImage(data) {\n      this.id = data.id;\n      this.name = data.name;\n      this.width = data.width;\n      this.height = data.height;\n      this.selections = {};\n      for (var ratio in data.selections) {\n        this.selections[ratio] = new Selection(data.selections[ratio]);\n      }\n    }\n\n    BettyImage.prototype.scaleToFit = function(width, height) {\n      var scale;\n      if (width && height) {\n        var fitRatio = width / height;\n        var thisRatio = this.width / this.height;\n        if (fitRatio > thisRatio) {\n          scale = height/ this.height;\n        } else {\n          scale = width / this.width;\n        }\n      } else {\n        if (width) {\n          scale = width / this.width;\n        }\n        if (height) {\n          scale = height/ this.height;\n        }\n      }\n      var scaled = {\n        width: Math.round(this.width * scale),\n        height: Math.round(this.height * scale),\n        scale: scale\n      };\n      return scaled;\n    };\n\n    BettyImage.prototype.getStyles = function(width, height, ratio) {\n      if (height === 0) {\n        height = null;\n      }\n\n      var selection = this.selections[ratio];\n      var scaledSelection = selection.scaleToFit(width, height);\n\n      return {\n        'background-image': 'url(' + this.url('original', DEFAULT_IMAGE_WIDTH, 'jpg') + ')',\n        'background-size': Math.floor(scaledSelection.width() / selection.width()  * this.width) + 'px',\n        'background-position': '-' + scaledSelection.x0 + 'px -' + scaledSelection.y0 + 'px',\n        'height': scaledSelection.height() + 'px',\n        'width': scaledSelection.width() + 'px',\n        'background-repeat': 'no-repeat',\n        'position': 'relative'\n      };\n    };\n\n    BettyImage.prototype.url = function (ratio, width, format) {\n      var exp = $interpolate(\n        '{{ base_url }}/{{ id }}/{{ ratio }}/{{ width }}.{{ format }}'\n      );\n      var idStr = this.id.toString();\n      var segmentedId = '';\n      for (var i=0; i < idStr.length; i++) {\n        if (i % 4 === 0 && i !== 0) {\n          segmentedId += '/';\n        }\n        segmentedId += idStr.substr(i, 1);\n      }\n      return exp({\n        base_url: IMAGE_SERVER_URL,\n        id: segmentedId,\n        ratio: ratio,\n        width: width,\n        format: format\n      });\n    };\n\n    BettyImage.prototype.updateSelection = function (ratio, selection) {\n      var data = {\n        x0: selection.x0,\n        x1: selection.x1,\n        y0: selection.y0,\n        y1: selection.y1\n      };\n      if (selection.source) {\n        data.source = selection.source;\n      }\n      return $http({\n        method: 'POST',\n        url: IMAGE_SERVER_URL + '/api/' + this.id + '/' + ratio,\n        headers: {\n          'X-Betty-Api-Key': BC_API_KEY,\n          'Content-Type': undefined,\n          'X-CSRFToken': undefined\n        },\n        data: data,\n        transformResponse: function (data, headersGetter) {\n          if (typeof data === 'string') {\n            data = $.parseJSON(data);\n          }\n          return [ratio, new Selection(data.selections[ratio])];\n        }\n      });\n    };\n\n    return BettyImage;\n  }\n\n  function SelectionFactory() {\n    function Selection(data) {\n        this.x0 = data.x0;\n        this.x1 = data.x1;\n        this.y0 = data.y0;\n        this.y1 = data.y1;\n        this.source = data.source;\n    }\n\n    Selection.prototype.width = function () {\n      return this.x1 - this.x0;\n    };\n\n    Selection.prototype.height = function () {\n      return this.y1 - this.y0;\n    };\n\n    Selection.prototype.scaleBy = function(scale) {\n      var scaledToFit = new Selection({\n        x0: Math.round(this.x0 * scale),\n        x1: Math.round(this.x1 * scale),\n        y0: Math.round(this.y0 * scale),\n        y1: Math.round(this.y1 * scale)\n      });\n      return scaledToFit;\n    };\n\n    Selection.prototype.scaleToFit = function (width, height) {\n\n      var scale;\n      if (width && height) {\n        var fitRatio = width / height;\n        var thisRatio = this.width() / this.height();\n        if (fitRatio > thisRatio) {\n          scale = height/ this.height();\n        } else {\n          scale = width / this.width();\n        }\n      } else {\n        if (width) {\n          scale = width / this.width();\n        }\n        if (height) {\n          scale = height/ this.height();\n        }\n      }\n      return this.scaleBy(scale);\n    };\n\n    return Selection;\n  }\n})();\n","'use strict';\n\nangular.module('videoHub')\n  .directive('bettyeditable', function($http, BettyCropper, openImageCropModal) {\n    return {\n      restrict: 'E',\n      templateUrl: 'shared/bettycropper/bettyeditable.html',\n      scope: {\n        'image': '=',\n        'addStyles': '@',\n        'placeholderText': '@',\n        'hideMetas': '=',\n        'ratio': '@',\n        'editable': '=?'\n      },\n      controller: function($scope, $element) {\n        $scope.editable = angular.isDefined($scope.editable) ? $scope.editable : true;\n        $scope.upload = function(e) {\n          BettyCropper.upload().then(\n            function(success) {\n              $scope.image = {\n                id: success.id,\n                caption: null,\n                alt: null\n              };\n              $scope.bettyImage = success;\n            },\n            function(error) {\n              console.log(error);\n            },\n            function(progress) {\n              console.log(progress);\n            }\n          );\n        };\n\n        $scope.edit = function(e) {\n          openImageCropModal($scope.image).then(function(image) {\n            if (image.id === null) {\n              $scope.image = null;\n            } else {\n              $scope.image = image;\n              BettyCropper.get($scope.image.id).then(function(response) {\n                $scope.bettyImage = response.data;\n                $scope.setStyles();\n              });\n            }\n          });\n        };\n      },\n\n      link: function(scope, element, attrs) {\n\n        if (scope.bettyImage === undefined) {\n          scope.bettyImage = null;\n        }\n\n        scope.setStyles = function() {\n          if (scope.bettyImage) {\n            scope.imageStyling = scope.bettyImage.getStyles(element.parent().width(), element.parent().height(), scope.ratio);\n          } else {\n            var ratioWidth = parseInt(scope.ratio.split('x')[0], 10);\n            var ratioHeight = parseInt(scope.ratio.split('x')[1], 10);\n            scope.imageStyling = {\n              'background-color': '#333',\n              'position': 'relative',\n              'width': element.parent().width(),\n              'height': Math.floor(element.parent().width() * ratioHeight / ratioWidth) + 'px',\n            };\n          }\n        };\n\n        scope.$watch('image', function(newImage, oldImage) {\n          if (newImage && newImage.id) {\n            BettyCropper.get(newImage.id).then(function(response) {\n              scope.bettyImage = response.data;\n            });\n          }\n        });\n\n        scope.$watch('bettyImage', function(newImage, oldImage) {\n          scope.setStyles();\n        }, true);\n\n        element.resize(scope.setStyles);\n\n        scope.removeImage = function() {\n          scope.image.id = null;\n        };\n\n        scope.editImage = function() {\n          openImageCropModal(scope.image)\n            .then(function(success) {\n              console.log(success);\n            });\n        };\n\n      }\n    };\n  });\n","'use strict';\n\nangular.module('BettyCropper')\n  .controller('ImageCropModalCtrl', function ($scope, $timeout, $modalInstance, BettyCropper, Selection, DEFAULT_IMAGE_WIDTH, imageData, ratios) {\n    $scope.selectedCrop = null;\n    $scope.cropMode = false;\n    $scope.ratios = ratios;\n    $scope.finished = false;\n    $scope.thumb_container_styles = {};\n    $scope.imageData = imageData;\n\n    if (!$scope.image) {\n      $scope.image = null;\n      BettyCropper.get(imageData.id).then(function(success){\n        $scope.image = success.data;\n      });\n    }\n\n    $scope.$watch('image', function (image) {\n      if (!image) {\n        return;\n      }\n\n      var finished = true;\n      for (var ratio in image.selections) {\n        if (image.selections[ratio].source === 'auto') {\n          finished = false;\n          break;\n        }\n      }\n      $scope.finished = finished;\n\n      $scope.scaleData = image.scaleToFit(550, 400);\n\n      $('.crop-image-container img').one('load', function () {\n        $(this).Jcrop({\n          allowSelect: false,\n          allowMove: true,\n          allowResize: true,\n          keySupport: false\n        }, function () {\n          $scope.jcrop_api = this;\n        });\n      });\n\n      $scope.image_url = image.url('original', DEFAULT_IMAGE_WIDTH, 'jpg');\n      if (!$scope.ratios) {\n        $scope.ratios = Object.keys(image.selections);\n      }\n\n      $scope.setThumbStyles();\n    });\n\n    $scope.$watch('selectedCrop', function(crop) {\n      if (!$scope.image) {\n        return;\n      }\n      var finished = true;\n      for (var ratio in $scope.image.selections) {\n        if ($scope.image.selections[ratio].source === 'auto' && ratio !== crop) {\n          finished = false;\n          break;\n        }\n      }\n      $scope.finished = finished;\n    });\n\n    $scope.selectCrop = function (ratio) {\n      if (!ratio) {\n        ratio = Object.keys($scope.image.selections)[0];\n        for (var key in $scope.image.selections) {\n          if ($scope.image.selections[key].source === 'auto') {\n            ratio = key;\n            break;\n          }\n        }\n      }\n      var selection = $scope.image.selections[ratio].scaleBy($scope.scaleData.scale);\n\n      $scope.jcrop_api.setOptions({\n        aspectRatio: selection.width() / selection.height()\n      });\n\n      $scope.jcrop_api.setSelect([\n        selection.x0,\n        selection.y0,\n        selection.x1,\n        selection.y1\n      ]);\n\n      $scope.cropMode = true;\n      $scope.selectedCrop = ratio;\n    };\n\n    $scope.setThumbStyles = function () {\n      $scope.thumb_styles = $scope.thumb_styles || {};\n\n      for (var ratio in $scope.image.selections) {\n        var scaledSelection = $scope.image.selections[ratio].scaleToFit(170, 170);\n        $scope.thumb_container_styles[ratio] = {\n          'padding-top': Math.round((180 - scaledSelection.height()) / 2) + 'px',\n          'padding-bottom': '5px',\n          'padding-left':  Math.round((180 - scaledSelection.width()) / 2) + 'px',\n          'padding-right': '5px'\n        };\n\n        $scope.thumb_styles[ratio] = $scope.image.getStyles(170, 170, ratio);\n      }\n    };\n\n    $scope.save = function (ratio) {\n\n      var jcrop_selection = $scope.jcrop_api.tellSelect();\n\n      var newSelection = new Selection({\n        x0: jcrop_selection.x,\n        x1: jcrop_selection.x2,\n        y0: jcrop_selection.y,\n        y1: jcrop_selection.y2,\n        source: 'user'\n      });\n      newSelection = newSelection.scaleBy(1 / $scope.scaleData.scale);\n      if (newSelection.x1 > $scope.image.width) {\n        newSelection.x1 = $scope.image.width;\n      }\n      if (newSelection.y1 > $scope.image.height) {\n        newSelection.y1 = $scope.image.height;\n      }\n\n      return this.image.updateSelection(ratio, newSelection);\n    };\n\n    $scope.saveAndQuit = function () {\n      var ratio = $scope.selectedCrop;\n      this.save(ratio).then(function (success) {\n        var ratio = success.data[0];\n        var selection = success.data[1];\n        $scope.image.selections[ratio] = selection;\n      });\n      $scope.cropMode = false;\n      $modalInstance.close(imageData);\n    };\n\n    $scope.saveAndNext = function () {\n      var ratio = $scope.selectedCrop;\n      this.save(ratio).then(function (success) {\n        var ratio = success.data[0];\n        var selection = success.data[1];\n        $scope.image.selections[ratio] = selection;\n\n        var nextRatioIndex = ($scope.ratios.indexOf(ratio) + 1) % $scope.ratios.length;\n\n        $scope.selectCrop($scope.ratios[nextRatioIndex]);\n      });\n    };\n\n  });\n","'use strict';\n\nangular.module('BettyCropper')\n  .factory('openImageCropModal', function ($modal) {\n    var openImageCropModal = function (imageData, ratios) {\n\n      return $modal.open({\n        templateUrl: 'shared/bettycropper/image-crop-modal.html',\n        controller: 'ImageCropModalCtrl',\n        resolve: {\n          imageData: function () { return imageData; },\n          ratios: function () { return ratios || false; }\n        },\n        backdrop: 'static'\n      }).result;\n\n    };\n\n    return openImageCropModal;\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .service('CurrentUser', function EditorItems($http, $q) {\n\n    var userDefer = $q.defer(),\n      $userPromise = userDefer.promise;\n\n    this.data = [];\n\n    var self = this;\n    this.getItems = function() {\n      $http.get('me').then(function(response) {\n        self.data = response.data;\n        userDefer.resolve(response.data);\n      });\n    };\n\n    this.getItems();\n\n    /**\n     * Get promise that resolves when user data is populated.\n     */\n    this.$retrieveData = function() {\n      return $userPromise;\n    };\n\n    /**\n     * Create a simplified version of this user for storage.\n     */\n    this.$simplified = function() {\n\n      return $userPromise.then(function(user) {\n\n        var displayName = user.first_name && user.last_name ?\n          user.first_name + ' ' + user.last_name :\n          (user.email || user.username);\n\n        return {\n          id: user.id,\n          displayName: displayName\n        };\n\n      });\n\n    };\n\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .directive('listNavBar', function() {\n    return {\n      'restrict': 'E',\n      'templateUrl': 'shared/listnavbar/listnavbar.html',\n      'controller': function($scope, $rootScope, logoUrl, $location, CurrentUser) {\n        $scope.logoUrl = logoUrl;\n        CurrentUser.$simplified().then(function(data) {\n          $scope.currentUserName = data.displayName;\n        });\n      }\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .directive('detailsNavBar', function() {\n    return {\n        'restrict': 'E',\n        'templateUrl': 'shared/detailsnavbar/detailsnavbar.html',\n        'transclude': true,\n        'controller': function($scope, $rootScope, logoUrl, $location, CurrentUser) {\n            $scope.logoUrl = logoUrl;\n            CurrentUser.$simplified().then(function(data){\n              $scope.currentUserName = data.displayName;\n            });\n        }\n    };\n  });\n","'use strict';\n\nangular.module('videoHub')\n  .directive('datetimeSelectionModal', function() {\n    return {\n      transclude: true,\n      'templateUrl': 'shared/datetimeselectionmodal/datetimeselectionmodal.html'\n    };\n  });\n","'use strict';\nangular.module('videoHub')\n  .directive('tagsAutocomplete', function($injector) {\n    return {\n      templateUrl: 'shared/tags-autocomplete/tags-autocomplete.html',\n      scope: {\n        'items': '=',\n        'service': '@service',\n        'labelAttr': '@',\n        'placeholderText': '@'\n      },\n      controller: function($scope, AlertService) {\n        //Inject service based on provided value\n        var service = $injector.get($scope.service);\n\n        $scope.fetchItemsThatMatchSearch = function() {\n          if (_.isEmpty($scope.search) || $scope.search.length < 4) {\n            $scope.currentItems = [];\n          } else {\n            $scope.tagsAreBeingFetchedFromTheServer = true;\n            AlertService.info('Tags are being fetched from the server, please wait.', false);\n            service.getList({\n              'q': $scope.search\n            }).then($scope.updateCurrentItemsAndDisplayDropdown,\n              function() {\n                AlertService.error('Somethign went wrong. Please contact your friendly sysadmin', true);\n              });\n          }\n        };\n\n        $scope.updateCurrentItemsAndDisplayDropdown = function(data) {\n          $scope.tagsAreBeingFetchedFromTheServer = false;\n          AlertService.success('Tags successfully fetched', true);\n          if (!_.isUndefined(data)) {\n            var currentItemsIds = _.pluck($scope.items, 'id');\n            data = _.reject(data, function(item) {\n              return _.contains(currentItemsIds, item.id);\n            });\n            $scope.currentItems = data;\n          } else {\n            $scope.currentItems = null;\n          }\n        };\n\n        $scope.clearSearch = function() {\n          $scope.search = '';\n          $scope.currentItems = [];\n          $scope.fetchItemsThatMatchSearch();\n          $scope.selectedElement = -1;\n        };\n\n        $scope.selectedElement = -1;\n        $scope.controlSelectedElementWithKeyboard = function(event) {\n          var keyCode = event.keyCode;\n          if (!_.isEmpty($scope.search)) {\n            var lastIndexOfCurrentItems = $scope.currentItems.length - 1;\n            switch (keyCode) {\n              case 27: // ESC\n                $scope.clearSearch();\n                break;\n              case 40: // DOWN\n                $scope.selectedElement = $scope.selectedElement >= lastIndexOfCurrentItems ?\n                  0 :\n                  $scope.selectedElement + 1;\n                break;\n              case 38: // UP\n                $scope.selectedElement = $scope.selectedElement <= 0 ?\n                  lastIndexOfCurrentItems :\n                  $scope.selectedElement - 1;\n                break;\n              case 13: // RETURN\n                if (!$scope.tagsAreBeingFetchedFromTheServer) {\n                  $scope.addItem($scope.currentItems[$scope.selectedElement]);\n                  $scope.selectedElement = -1;\n                }\n                break;\n              default:\n                return;\n            }\n          }\n\n        };\n\n        $scope.addItem = function(item) {\n          if (_.isUndefined(item)) {\n            item = {\n              'name': $scope.search\n            };\n            var isCurrentTagInCurrentItemsPredicate = _.matches(item);\n            var currentObjectFetchedFromCurrentItems = _.find($scope.currentItems, isCurrentTagInCurrentItemsPredicate);\n            if (currentObjectFetchedFromCurrentItems) {\n              $scope.items.push(currentObjectFetchedFromCurrentItems);\n            } else {\n              AlertService.info('Saving new tag...', false);\n              service.post(item).then(function(data) {\n                $scope.items.push(data);\n                $scope.clearSearch();\n                AlertService.success('New tag saved', true);\n              }, function() {\n                AlertService.error('Something went wrong. Plase contact your friendly sysadmin.', true);\n              });\n            }\n          } else {\n            $scope.items.push(item);\n          }\n          $scope.clearSearch();\n        };\n\n        $scope.removeItem = function(itemToBeRemovedFromArray) {\n          $scope.items = _.reject($scope.items, function(item) {\n            return item.id === itemToBeRemovedFromArray.id;\n          });\n        };\n      }\n    };\n  });\n","'use strict';\nangular.module('videoHub')\n  .directive('articleTools', [function() {\n    return {\n      replace: true,\n      transclude: true,\n      templateUrl: 'shared/articletools/articletools.html',\n    };\n  }]);\n"]}